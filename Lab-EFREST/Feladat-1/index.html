
<!doctype html>
<html lang="hu" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Dudás Ákos">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.5">
    
    
      
        <title>Feladat 1: Státuszok kezelése - BMEVIAUAC09 Szoftverfejlesztés laboratórium 1</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#ef5552">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra-material-theme.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="red" data-md-color-accent="red">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#feladat-1-statuszok-kezelese" class="md-skip">
          Kihagyás
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Élőfej">
    <a href="../.." title="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" class="md-header__button md-logo" aria-label="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAC09 Szoftverfejlesztés laboratórium 1
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Feladat 1: Státuszok kezelése
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Keresés" placeholder="Keresés" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Törlés" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Keresés inicializálása
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/bmeviauac01/laborok/" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laborok
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Lapok" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Szoftverfejlesztés laboratórium 1
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-ReportingServices/" class="md-tabs__link">
        Reporting Services
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-QueryOptimization/" class="md-tabs__link">
        Lekérdezés optimalizálás
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MSSQL/" class="md-tabs__link">
        MSSQL
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MongoDB/" class="md-tabs__link">
        MongoDB
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Entity Framework & REST
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigáció" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" class="md-nav__button md-logo" aria-label="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAC09 Szoftverfejlesztés laboratórium 1
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/bmeviauac01/laborok/" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laborok
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Szoftverfejlesztés laboratórium 1
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Szoftverfejlesztés laboratórium 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Szoftverfejlesztés laboratórium 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Tárgy ismertető
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub/" class="md-nav__link">
        Feladatok beadása (GitHub)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-Actions/" class="md-nav__link">
        GitHub Actions ismertető
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        Tipikus problémák
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../VisualStudio/" class="md-nav__link">
        Visual Studio & .NET Core SDK telepítése
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../bme-cloud-vm/" class="md-nav__link">
        BME Cloud használata
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-credentials/" class="md-nav__link">
        Egyetemi laborokban: GitHub belépés
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Reporting Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reporting Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Reporting Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/" class="md-nav__link">
        Reporting Services
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-1/" class="md-nav__link">
        Feladat 1: Táblázatos riport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-2/" class="md-nav__link">
        Feladat 2: Vizualizáció
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-3/" class="md-nav__link">
        Feladat 3: Értékesítői riport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Lekérdezés optimalizálás
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Lekérdezés optimalizálás" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Lekérdezés optimalizálás
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-QueryOptimization/" class="md-nav__link">
        Lekérdezés optimalizálás
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-QueryOptimization/Feladat-1/" class="md-nav__link">
        Közös feladatok
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-QueryOptimization/Feladat-2/" class="md-nav__link">
        Önálló feladatok
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-QueryOptimization/Feladat-3/" class="md-nav__link">
        Opcionális feladatok
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        MSSQL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MSSQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          MSSQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/" class="md-nav__link">
        MSSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-1/" class="md-nav__link">
        Feladat 1: Kategória nézet és adatbeszúrás
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-2/" class="md-nav__link">
        Feladat 2: Számla ellenőrzése
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-3/" class="md-nav__link">
        Feladat 3: Számla tábla denormalizálása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        MongoDB
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MongoDB" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          MongoDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-1/" class="md-nav__link">
        Feladat 1: Termékek lekérdezése és módosítása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-2/" class="md-nav__link">
        Feladat 2: Kategóriák listázása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-3/" class="md-nav__link">
        Feladat 3: Megrendelések lekérdezése és módosítása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-4/" class="md-nav__link">
        Feladat 4: Vevők listázása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-5/" class="md-nav__link">
        Feladat 5: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Entity Framework & REST
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Entity Framework & REST" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Entity Framework & REST
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Entity Framework és REST
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Feladat 1: Státuszok kezelése
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Feladat 1: Státuszok kezelése
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#visual-studio-solution-megnyitasa" class="md-nav__link">
    Visual Studio solution megnyitása
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webalkalmazas-elinditasa" class="md-nav__link">
    Webalkalmazás elindítása
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minden-statusz-listazasa-4p" class="md-nav__link">
    Minden státusz listázása (4p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lekerdezes-es-beszuras-muveletek-4p" class="md-nav__link">
    Lekérdezés és beszúrás műveletek (4p)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Feladat-2/" class="md-nav__link">
        Feladat 2: Task alapműveletek
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Feladat-3/" class="md-nav__link">
        Feladat 3: Task-on végzett műveletek
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#visual-studio-solution-megnyitasa" class="md-nav__link">
    Visual Studio solution megnyitása
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webalkalmazas-elinditasa" class="md-nav__link">
    Webalkalmazás elindítása
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minden-statusz-listazasa-4p" class="md-nav__link">
    Minden státusz listázása (4p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lekerdezes-es-beszuras-muveletek-4p" class="md-nav__link">
    Lekérdezés és beszúrás műveletek (4p)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bmeviauac01/laborok/edit/master/docs/Lab-EFREST/Feladat-1.md" title="Oldal szerkesztése" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="feladat-1-statuszok-kezelese">Feladat 1: Státuszok kezelése<a class="headerlink" href="#feladat-1-statuszok-kezelese" title="Permanent link">&para;</a></h1>
<p>Ebben a feladatban a státusz entitáshoz tartozó alapműveleteket fogjuk megvalósítani.</p>
<p><strong>A feladat megoldásával 8 pont szerezhető.</strong></p>
<h2 id="visual-studio-solution-megnyitasa">Visual Studio solution megnyitása<a class="headerlink" href="#visual-studio-solution-megnyitasa" title="Permanent link">&para;</a></h2>
<p>Nyisd meg a letöltött repository-ban a Visual Studio solution-t (<code>.sln</code> fájl). Ha a megnyitás során a Visual Studio azt jelezné, hogy a projekt típus nem támogatott, akkor telepítsd a Visual Studio hiányzó komponenseit (lásd <a href="../../VisualStudio/">itt</a>).</p>
<div class="admonition warning">
<p class="admonition-title">NE frissíts semmilyen verziót</p>
<p>Ne frissítsd se a projektet, se a .NET Core verziót, se a Nuget csomagokat! Ha ilyen kérdéssel találkozol a solution megnyitása során, akkor mindig mondj nemet!</p>
</div>
<p>A solution struktúrája a többrétegű alkalmazás felépítésének megfelelő:</p>
<ul>
<li>A <code>Controllers</code> mappa tartalmazza a Web Api controllereket, mely a REST kéréseket kiszolgálja.</li>
<li>A <code>DAL</code> mappa tartalmazza az adatelérést, amely egyrészt egy repository réteget, másrészt egy Entity Framework Code First modellt tartalmaz.</li>
<li>A <code>Model</code> mappában a közösen használt entitás osztályok találhatóak.</li>
</ul>
<p>Munkád során a <code>DAL.StatusesRepository</code> és <code>Controllers.StatusesController</code> osztályokba dolgozz! Ezen fájlok tartalmát tetszőlegesen módosíthatod (feltéve, hogy a repository továbbra is megfelel a <code>IStatusesRepository</code> interfésznek, és természetesen továbbra is fordul a kód).</p>
<h2 id="webalkalmazas-elinditasa">Webalkalmazás elindítása<a class="headerlink" href="#webalkalmazas-elinditasa" title="Permanent link">&para;</a></h2>
<p>Próbáld ki, hogy elindul-e a program.</p>
<ol>
<li>
<p>Fordítsd le és indítsd el Visual Studio-ból az alkalmazást.</p>
</li>
<li>
<p>Nyisd meg böngészőben a <a href="http://localhost:5000/api/ping">http://localhost:5000/api/ping</a> oldalt.</p>
</li>
</ol>
<div class="admonition success">
<p>Ha minden rendben ment, akkor a böngészőben a "pong" szöveget látod, és a futó alkalmazás logjában látható a kiszolgált kérés.</p>
</div>
<h2 id="minden-statusz-listazasa-4p">Minden státusz listázása (4p)<a class="headerlink" href="#minden-statusz-listazasa-4p" title="Permanent link">&para;</a></h2>
<p>Valósítsuk meg az első műveletet, amely minden státusz entitást listáz.</p>
<ol>
<li>
<p>Nyisd meg a <code>Model.Status</code> osztályt. Ez írja le az üzleti logika számára milyen tulajdonságokkal rendelkezik a státusz entitás.</p>
<div class="admonition warning">
<p>Ezt az osztályt <strong>NE</strong> módosítsd.</p>
</div>
</li>
<li>
<p>Nyisd meg a <code>DAL.EfDbContext.DbStatus</code> osztályt. Ez a státusz entitás adatbázisbeli reprezentációja, de még üres. Írjuk meg az osztályt:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DbStatus</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Az <code>Id</code> lesz az adatbázisbeli kulcs, a <code>Name</code> pedig a státusz neve.</p>
</li>
<li>
<p>Nyisd meg a <code>DAL.EfDbContext.TasksDbContext</code> osztályt. Ide fel kell vegyük a státuszokhoz tartozó <code>DbSet</code>-et, és az <code>OnModelCreating</code> függvényben konfigurálnunk kell a C# osztály - relációs adatbázis leképzést:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TasksDbContext</span> <span class="p">:</span> <span class="n">DbContext</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">DbStatus</span><span class="p">&gt;</span> <span class="n">Statuses</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnModelCreating</span><span class="p">(</span><span class="n">ModelBuilder</span> <span class="n">modelBuilder</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">DbStatus</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="n">ToTable</span><span class="p">(</span><span class="s">&quot;statuses&quot;</span><span class="p">);</span>
        <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">DbStatus</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="n">HasKey</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
        <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">DbStatus</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="n">Property</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">HasMaxLength</span><span class="p">(</span><span class="m">50</span><span class="p">)</span>
            <span class="p">.</span><span class="n">IsRequired</span><span class="p">(</span><span class="n">required</span><span class="p">:</span> <span class="k">true</span><span class="p">).</span><span class="n">IsUnicode</span><span class="p">(</span><span class="n">unicode</span><span class="p">:</span> <span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>A fentiekkel megadtuk a használandó tábla nevét, a kulcsot (amely így automatikusan inkrementált lesz, azaz nem kell értéket adnunk neki), és végül a névhez tartozó megkötéseinket.</p>
</li>
<li>
<p>Menj a <code>DAL.StatusesRepository.List()</code> függvényhez. Ez a repository réteg, amely az adatbázissal Entity Framework-ön keresztül kapcsolatba lép. Listázzuk ki az összes státuszt az adatbázisból:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="n">IReadOnlyCollection</span><span class="p">&lt;</span><span class="n">Model</span><span class="p">.</span><span class="n">Status</span><span class="p">&gt;</span> <span class="n">List</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">ToModel</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>A <code>db</code> változónk a DbContext, amely a dependency injection keretrendszer használatával injektálásra kerül.</p>
</li>
<li>
<p>A <code>ToModel</code> függvény egy segédfüggvény lesz, amelyet többször használunk. Ez képezi le az adatbázisból érkező C# osztályt a modellként használt másik C# osztályra. Ezt is írjuk meg (ugyanide, a repository osztályba).</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="k">static</span> <span class="n">Model</span><span class="p">.</span><span class="n">Status</span> <span class="n">ToModel</span><span class="p">(</span><span class="n">DbStatus</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Model</span><span class="p">.</span><span class="n">Status</span><span class="p">(</span><span class="k">value</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="k">value</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>A repository réteg után következik a controller. Nyisd meg a <code>Controllers.StatusesController</code> osztályt. <strong>Fűzd bele a Neptun kódod a controller URL-jének végére</strong>, tehát a controller a <code>/api/statuses/neptun</code> címre érkező kérésekkel foglalkozik, ahol az utolsó 6 kisbetűs karakter a saját Neptun kódod.</p>
<div class="highlight"><pre><span></span><code><span class="hll"><span class="na">[Route(&quot;api/statuses/neptun&quot;)]</span>
</span><span class="na">[ApiController]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">StatusesController</span> <span class="p">:</span> <span class="n">ControllerBase</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Neptun kód fontos</p>
<p>A Neptun kód a későbbiekben a kért képernyőképen fog megjelenni. Fontos, hogy ne hagyd ki!</p>
</div>
</li>
<li>
<p>Írjuk meg a <code>GET /api/statuses/neptun</code> kérésre válaszoló végpontot: A dependency injection már konfigurálva van, így a konstruktor átveszi a repository interfészét (<em>nem</em> a repository osztályt, amit írtunk!).</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">StatusesController</span> <span class="p">:</span> <span class="n">ControllerBase</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

<span class="na">    [HttpGet]</span>
    <span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Status</span><span class="p">&gt;</span> <span class="n">List</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">repository</span><span class="p">.</span><span class="n">List</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Fordítsd le és indítsd el az alkalmazást.</p>
</li>
<li>
<p>Nyisd meg a Postman-t és küldj a <a href="http://localhost:5000/api/statuses/neptun">http://localhost:5000/api/statuses/neptun</a> címre egy GET kérést (a saját Neptun kódodat kell itt is az URL végére írni).</p>
<p><img alt="Státuszok lekérdezése Postman-nel" src="../../images/efrest/rest-postman-get-statuses.png" /></p>
<div class="admonition success">
<p>Akkor sikeres a hívás, ha a Postman szerint 200 a válaszkód, és üres a válasz. Ha valami hiba lenne, akkor a Visual Studio Output ablakát ill. a futó konzol alkalmazás logját érdemes nézni.</p>
</div>
</li>
<li>
<p>Üres adatbázissal nehéz tesztelni. Állítsd le a futó alkalmazást, navigálj a <code>DAL.EfDbContext.TasksDbContext.OnModelCreating</code> függvényhez, és illessz be egy  un. <em>seed</em> adatot az adatbázisba:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TasksDbContext</span> <span class="p">:</span> <span class="n">DbContext</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnModelCreating</span><span class="p">(</span><span class="n">ModelBuilder</span> <span class="n">modelBuilder</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="n">modelBuilder</span><span class="p">.</span><span class="n">Entity</span><span class="p">&lt;</span><span class="n">DbStatus</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="n">HasData</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span>
            <span class="p">{</span>
                <span class="k">new</span> <span class="nf">DbStatus</span><span class="p">()</span> <span class="p">{</span> <span class="n">Id</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;new&quot;</span> <span class="p">},</span>
                <span class="k">new</span> <span class="nf">DbStatus</span><span class="p">()</span> <span class="p">{</span> <span class="n">Id</span> <span class="p">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;in progress&quot;</span> <span class="p">},</span>
            <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Fordítsd le és futtasd újból az alkalmazást, majd add ki ismét az előbbi GET kérést. Most már nem üres a válasz, meg kell kapnod a két státuszt.</p>
<div class="admonition important">
<p class="admonition-title">Ha nem látod az új rekordokat</p>
<p>Ha mégse jelenne meg a válaszban a két <em>seed</em> objektum, akkor lehet, hogy a DB nem frissült, és nem jutott érvényre a <code>HasData</code> művelet. Töröld ki a <code>tasks.db</code> SQLite állományt, aminek hatására újból létrejön az adatbázisfájl az app indulásakor a tesztadatainkkal.</p>
<p>Az ilyen jellegű séma-, és adatmódosításokat éles környezetben <a href="https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/?tabs=dotnet-core-cli">migrációkkal</a> szokás megoldani. Az egyszerűség végett mi ezt kerülni fogjuk, és ha változik a séma, egyszerűen törölheted a <code>tasks.db</code> fájlt.</p>
</div>
</li>
</ol>
<h2 id="lekerdezes-es-beszuras-muveletek-4p">Lekérdezés és beszúrás műveletek (4p)<a class="headerlink" href="#lekerdezes-es-beszuras-muveletek-4p" title="Permanent link">&para;</a></h2>
<p>Az összes státusz listázása mellett még vár ránk pár alapvető művelet:</p>
<ul>
<li>név alapján létezés ellenőrzése (<code>HEAD /api/statuses/neptun/{nev}</code>),</li>
<li>ID alapján keresés (<code>GET /api/statuses/neptun/{id}</code>),</li>
<li>és új létrehozása (<code>POST /api/statuses/neptun</code>).</li>
</ul>
<p>Rétegről rétegre haladva valósítsuk meg a funkciókat.</p>
<ol>
<li>
<p>Implementáljuk az első kettőt először a <code>DAL.StatusesRepository</code>-ban. Ügyeljünk rá, hogy a név alapú keresésnél kisbetű-nagybetű függetlenül keressünk!</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="kt">bool</span> <span class="nf">ExistsWithName</span><span class="p">(</span><span class="kt">string</span> <span class="n">statusName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">db</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">EF</span><span class="p">.</span><span class="n">Functions</span><span class="p">.</span><span class="n">Like</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">statusName</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">public</span> <span class="n">Model</span><span class="p">.</span><span class="n">Status</span> <span class="n">FindById</span><span class="p">(</span><span class="kt">int</span> <span class="n">statusId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">dbRecord</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="n">FirstOrDefault</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Id</span> <span class="p">==</span> <span class="n">statusId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dbRecord</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nf">ToModel</span><span class="p">(</span><span class="n">dbRecord</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Az <code>EF.Functions.Like</code> utasítással egy SQL utasítást "képezünk le" Entity Framework-re. Amikor ebből a rendszer az SQL utasítást készíti, akkor a platformnak megfelelő <code>LIKE</code> operátor fog születni. Ez a megoldás a kis- és nagybetű független összehasonlítást szolgálja.</p>
</li>
<li>
<p>A hozzájuk tartozó controller végpontok pedig:</p>
<div class="highlight"><pre><span></span><code><span class="na">[HttpHead(&quot;{statusName}&quot;)]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status200OK)]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status404NotFound)]</span>
<span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">ExistsWithName</span><span class="p">(</span><span class="kt">string</span> <span class="n">statusName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">ExistsWithName</span><span class="p">(</span><span class="n">statusName</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">exists</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">Ok</span><span class="p">();</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nf">NotFound</span><span class="p">();</span>
<span class="p">}</span>

<span class="na">[HttpGet(&quot;{id}&quot;)]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status200OK)]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status404NotFound)]</span>
<span class="k">public</span> <span class="n">ActionResult</span><span class="p">&lt;</span><span class="n">Status</span><span class="p">&gt;</span> <span class="n">Get</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="k">value</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">FindById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">NotFound</span><span class="p">();</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nf">Ok</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Figyeld meg a controller metódusokon az attribútumokat és a visszatérési értékeket! Ha van tartalma a válasznak (body a http csomagban), akkor <code>ActionResult&lt;T&gt;</code> a visszatérési érték, ha csak státusz kódot adunk vissza, akkor <code>ActionResult</code>. Az <code>Ok</code> és <code>NotFound</code> függvények segédfüggvények a válasz előállításához.</p>
<div class="admonition note">
<p>Az URL-ek tekintetében csak az URL végével kellett foglalkozunk. A <code>/api/statuses/neptun</code> részt a controller osztályra raktuk, tehát az az összesre érvényes.</p>
</div>
</li>
<li>
<p>Az új státusz beszúrásához ismét a repository felől induljunk. A létrehozáshoz egy segéd modell osztályt, a <code>CreateStatus</code>-t kapjuk, ebben csak egy név van. Garantálni szeretnénk a nevek egyediségét, hogy ne legyen két státusz ugyanazzal a névvel. A beszúrásnál ezt ellenőrizni fogjuk, méghozzá itt is kisbetű-nagybetű függetlenül.</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="n">Model</span><span class="p">.</span><span class="n">Status</span> <span class="n">Insert</span><span class="p">(</span><span class="n">CreateStatus</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tran</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="n">BeginTransaction</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">IsolationLevel</span><span class="p">.</span><span class="n">RepeatableRead</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">db</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">EF</span><span class="p">.</span><span class="n">Functions</span><span class="p">.</span><span class="n">Like</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span> <span class="k">value</span><span class="p">.</span><span class="n">Name</span><span class="p">)))</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">&quot;name must be unique&quot;</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">toInsert</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DbStatus</span><span class="p">()</span> <span class="p">{</span> <span class="n">Name</span> <span class="p">=</span> <span class="k">value</span><span class="p">.</span><span class="n">Name</span> <span class="p">};</span>
        <span class="n">db</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">toInsert</span><span class="p">);</span>

        <span class="n">db</span><span class="p">.</span><span class="n">SaveChanges</span><span class="p">();</span>
        <span class="n">tran</span><span class="p">.</span><span class="n">Commit</span><span class="p">();</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Model</span><span class="p">.</span><span class="n">Status</span><span class="p">(</span><span class="n">toInsert</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">toInsert</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition important">
<p>Figyeljünk a tranzakcióra! Először ellenőriznünk kell, van-e már hasonló név. Ha igen, akkor a hibát kivétellel jelezzük. Ha beszúrhatú a rekord, akkor a beszúrás után a tranzakciót is kommitálnunk kell. És mivel az ID-t az adatbázis generálja, a repository függvény visszaadja a létrehozott entitást, benne az új ID-val.</p>
</div>
</li>
<li>
<p>A POST http kérést az alábbi controller metódus fogja kiszolgálni:</p>
<div class="highlight"><pre><span></span><code><span class="na">[HttpPost]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status201Created)]</span>
<span class="na">[ProducesResponseType(StatusCodes.Status400BadRequest)]</span>
<span class="k">public</span> <span class="n">ActionResult</span><span class="p">&lt;</span><span class="n">Status</span><span class="p">&gt;</span> <span class="n">Create</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span> <span class="n">Dto</span><span class="p">.</span><span class="n">CreateStatus</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">created</span> <span class="p">=</span> <span class="n">repository</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">CreatedAtAction</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">Get</span><span class="p">),</span> <span class="k">new</span> <span class="p">{</span> <span class="n">id</span> <span class="p">=</span> <span class="n">created</span><span class="p">.</span><span class="n">Id</span> <span class="p">},</span> <span class="n">created</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">ArgumentException</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nf">BadRequest</span><span class="p">(</span><span class="k">new</span> <span class="p">{</span> <span class="n">error</span> <span class="p">=</span> <span class="n">ex</span><span class="p">.</span><span class="n">Message</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Figyeljük meg a sikeres és a sikertelen válaszokat is. Ha sikerült a beszúrás, akkor a <code>CreatedAtAction</code> segédfüggvény olyan válasszal fog visszatérni, ahol a body tartalmazza az új entitást, a <em>Location</em> header pedig a linket, ahol az entitás lekérdezhető (ezért a hivatkozás a <code>nameof(Get)</code>-tel). Ha viszont a repository-ban eldobott kivétel érkezik, akkor jelezzük a problémát a hívónak. Ebben a válaszban a státuszkód 400 lesz, és itt is lesz body, amiben hibaszöveg lesz (hiszen a REST nem definiálja a hibajelzés további módjait a 400 válaszkódon túl).</p>
</li>
<li>
<p>Fordítsd le az alkalmazást és indítsd el. Próbáld ki a megírt kéréseket! Állítsd elő a sikeres és a sikertelen ágakat is.</p>
</li>
</ol>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ</p>
<p>Készíts egy <strong>képernyőképet</strong> Postman-ből (avagy más, hasonló eszközből, ha nem Postman-t használtál), amely egy <strong>sikertelen</strong> beszúrást mutat. A sikertelenség oka a már létező név legyen. A képet a megoldásban <code>f1.png</code> néven add be. A képernyőképen látszódjon a <strong>kimenő kérés és a válasz is minden részletével</strong> (URL, body, válasz kód, válasz body). Ellenőrizd, hogy a <strong>Neptun kódod</strong> az URL-ben szerepel-e! A képernyőkép szükséges feltétele a pontszám megszerzésének.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" title="Back to top" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <nav
      class="md-footer__inner md-grid"
      aria-label="Élőláb"
    >

      <!-- Link to previous page -->
      
        <a
          href="../"
          class="md-footer__link md-footer__link--prev"
          rel="prev"
        >
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Előző
              </span>
              Entity Framework és REST
            </div>
          </div>
        </a>
      

      <!-- Link to next page -->
      
        <a
          href="../Feladat-2/"
          class="md-footer__link md-footer__link--next"
          rel="next"
        >
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Következő
              </span>
              Feladat 2: Task alapműveletek
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; BME VIK AUT
          </div>
        
      </div>

      <!-- Social links -->
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top"], "translations": {"clipboard.copy": "M\u00e1sol\u00e1s v\u00e1g\u00f3lapra", "clipboard.copied": "V\u00e1g\u00f3lapra m\u00e1solva", "search.config.lang": "hu", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Keres\u00e9s", "search.result.placeholder": "Keres\u00e9shez \u00edrj ide valamit", "search.result.none": "Nincs tal\u00e1lat", "search.result.one": "1 egyez\u0151 dokumentum", "search.result.other": "# egyez\u0151 dokumentum", "search.result.more.one": "1 tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.more.other": "# tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.term.missing": "\u00dcres"}, "search": "../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.a1609d9a.min.js"></script>
      
    
  </body>
</html>