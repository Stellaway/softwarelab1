
<!doctype html>
<html lang="hu" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Dudás Ákos">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Közös feladatok - BMEVIAUAC09 Szoftverfejlesztés laboratórium 1</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#ef5552">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra-material-theme.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="red" data-md-color-accent="red">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kozos-feladatok" class="md-skip">
          Kihagyás
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" class="md-header__button md-logo" aria-label="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAC09 Szoftverfejlesztés laboratórium 1
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Közös feladatok
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Keresés" placeholder="Keresés" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/bmeviauac01/laborok/" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laborok
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Szoftverfejlesztés laboratórium 1
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-ReportingServices/" class="md-tabs__link">
        Reporting Services
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Lekérdezés optimalizálás
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MSSQL/" class="md-tabs__link">
        MSSQL
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MongoDB/" class="md-tabs__link">
        MongoDB
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-EFREST/" class="md-tabs__link">
        Entity Framework & REST
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" class="md-nav__button md-logo" aria-label="BMEVIAUAC09 Szoftverfejlesztés laboratórium 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAC09 Szoftverfejlesztés laboratórium 1
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/bmeviauac01/laborok/" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laborok
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Szoftverfejlesztés laboratórium 1
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Szoftverfejlesztés laboratórium 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Szoftverfejlesztés laboratórium 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Tárgy ismertető
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub/" class="md-nav__link">
        Feladatok beadása (GitHub)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-Actions/" class="md-nav__link">
        GitHub Actions ismertető
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        Tipikus problémák
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../VisualStudio/" class="md-nav__link">
        Visual Studio & .NET Core SDK telepítése
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../bme-cloud-vm/" class="md-nav__link">
        BME Cloud használata
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-credentials/" class="md-nav__link">
        Egyetemi laborokban: GitHub belépés
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Reporting Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reporting Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Reporting Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/" class="md-nav__link">
        Reporting Services
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-1/" class="md-nav__link">
        Feladat 1: Táblázatos riport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-2/" class="md-nav__link">
        Feladat 2: Vizualizáció
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-3/" class="md-nav__link">
        Feladat 3: Értékesítői riport
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Lekérdezés optimalizálás
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Lekérdezés optimalizálás" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Lekérdezés optimalizálás
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Lekérdezés optimalizálás
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Közös feladatok
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Közös feladatok
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feladat-1-2p" class="md-nav__link">
    Feladat 1 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-2-2p" class="md-nav__link">
    Feladat 2 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-3-2p" class="md-nav__link">
    Feladat 3 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-4-2p" class="md-nav__link">
    Feladat 4 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-5-2p" class="md-nav__link">
    Feladat 5 (2p)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Feladat-2/" class="md-nav__link">
        Önálló feladatok
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Feladat-3/" class="md-nav__link">
        Opcionális feladatok
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        MSSQL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MSSQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          MSSQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/" class="md-nav__link">
        MSSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-1/" class="md-nav__link">
        Feladat 1: Kategória nézet és adatbeszúrás
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-2/" class="md-nav__link">
        Feladat 2: Számla ellenőrzése
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-3/" class="md-nav__link">
        Feladat 3: Számla tábla denormalizálása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        MongoDB
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="MongoDB" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          MongoDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-1/" class="md-nav__link">
        Feladat 1: Termékek lekérdezése és módosítása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-2/" class="md-nav__link">
        Feladat 2: Kategóriák listázása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-3/" class="md-nav__link">
        Feladat 3: Megrendelések lekérdezése és módosítása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-4/" class="md-nav__link">
        Feladat 4: Vevők listázása
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Feladat-5/" class="md-nav__link">
        Feladat 5: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Entity Framework & REST
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Entity Framework & REST" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Entity Framework & REST
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/" class="md-nav__link">
        Entity Framework és REST
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Feladat-1/" class="md-nav__link">
        Feladat 1: Státuszok kezelése
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Feladat-2/" class="md-nav__link">
        Feladat 2: Task alapműveletek
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Feladat-3/" class="md-nav__link">
        Feladat 3: Task-on végzett műveletek
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Feladat-4/" class="md-nav__link">
        Feladat 4: Opcionális feladat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feladat-1-2p" class="md-nav__link">
    Feladat 1 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-2-2p" class="md-nav__link">
    Feladat 2 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-3-2p" class="md-nav__link">
    Feladat 3 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-4-2p" class="md-nav__link">
    Feladat 4 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feladat-5-2p" class="md-nav__link">
    Feladat 5 (2p)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bmeviauac01/laborok/edit/master/docs/Lab-QueryOptimization/Feladat-1.md" title="Oldal szerkesztése" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="kozos-feladatok">Közös feladatok<a class="headerlink" href="#kozos-feladatok" title="Permanent link">&para;</a></h1>
<div class="admonition example">
<p class="admonition-title">BEADANDÓ</p>
<p>A feladatok megoldása során dokumentáld a <code>README.md</code> markdown fájlba:</p>
<ul>
<li>a használt SQL utasítást (amennyiben ezt a feladat szövege kérte),</li>
<li>a lekérdezési tervről készített képet (csak a tervet, <em>ne</em> az egész képernyőt),</li>
<li>és a lekérdezési terv magyarázatát: <em>mit</em> látunk és <em>miért</em>.</li>
</ul>
</div>
<p><strong>Annak ellenére, hogy a megoldások megtalálhatóak alább, az SQL utasítások kiadása, a lekérdezési terv képernyőkép elkészítése és a magyarázattal együtt való dokumentálás szükséges része a feladatnak.</strong></p>
<p>Amennyiben egyes (rész)feladatok lekérdezési terve és/vagy a magyarázat azonos, vagy legalábbis nagyon hasonló, elég egyszer elkészíteni a lekérdezési tervről a képet, és a magyarázatot is elég egyszer megadni, csak jelezd, hogy ez mely feladatokra vonatkozik.</p>
<h2 id="feladat-1-2p">Feladat 1 (2p)<a class="headerlink" href="#feladat-1-2p" title="Permanent link">&para;</a></h2>
<p>Dobd el a <code>CustomerSite</code> =&gt; <code>Customer</code> idegen kulcsot és a <code>Customer</code> elsődleges kulcs kényszerét. Legegyszerűbb, ha az <em>Object Explorer</em>-ben megkeresed ezeket, és törlöd (a <em>PK...</em> kezdetűek az elsődleges kulcsok, az <em>FK...</em>  kezdetűek a külső kulcsok - két külön táblában kell keresd a törlendőket!):</p>
<p><img alt="Kulcs törlése" src="../../images/queryopt/queryopt-delete-key.png" /></p>
<p>Vizsgáld meg a következő lekérdezések végrehajtási tervét a <code>Customer</code> táblán – mindig teljes rekordot kérjünk vissza (<code>select *</code>):</p>
<ul>
<li>a) teljes tábla lekérdezése</li>
<li>b) egy rekord lekérdezése elsődleges kulcs alapján</li>
<li>c) olyan rekordok lekérdezése, ahol az elsődleges kulcs értéke nem egy konstans érték (használd a <code>&lt;&gt;</code> összehasonlító operátort)</li>
<li>d) olyan rekordok lekérdezése, ahol az elsődleges kulcs értéke nagyobb, mint egy konstans érték</li>
<li>e) olyan rekordok lekérdezése, ahol az elsődleges kulcs értéke nagyobb, mint egy konstans érték, ID szerint csökkenő sorrendbe rendezve</li>
</ul>
<p>Add meg a használt SQL utasításokat, majd vizsgáld meg a lekérdezési terveket, és adj magyarázatot rájuk!</p>
<details class="success"><summary>Megoldás</summary><p>A kiadott <strong>parancsok</strong>:</p>
<ul>
<li>a) <code>select * from customer</code></li>
<li>b) <code>select * from customer where id = 1</code></li>
<li>c) <code>select * from customer where id &lt;&gt; 1</code></li>
<li>d) <code>select * from customer where id &gt; 1</code></li>
<li>e) <code>select * from customer where id &gt; 1 order by id desc</code></li>
</ul>
<p><strong>a)-d)</strong></p>
<p>A <strong>lekérdezési terv</strong> mindegyikre nagyon hasonló, mindegyik <em>table scan</em>-t használt:</p>
<p><img alt="" src="../../images/queryopt/f1-1.png" /></p>
<p><strong>Magyarázat</strong>: az optimalizáló nem tud indexet használni, így minden lekérdezés <em>table scan</em> lesz.</p>
<p><strong>e)</strong></p>
<p>Egyedül ez különbözik, az order by miatt még egy sort is lesz benne.</p>
<p><img alt="" src="../../images/queryopt/f1-2.png" /></p>
<p><strong>Magyarázat</strong>: A <em>table scan</em> marad, és még rendezni is kell, amihez nincs index segítség, tehát külön lépés lesz.</p>
</details>
<h2 id="feladat-2-2p">Feladat 2 (2p)<a class="headerlink" href="#feladat-2-2p" title="Permanent link">&para;</a></h2>
<p>Hozd létre újra az elsődleges kulcsot a <code>Customer</code> táblán:</p>
<ul>
<li>Job kattintás a táblán &gt; Design &gt; az ID oszlopon "Set Primary Key " és Mentés gomb,</li>
<li>vagy az <code>ALTER TABLE [dbo].[Customer] ADD PRIMARY KEY CLUSTERED ([ID] ASC)</code> SQL utasítás lefuttatása.</li>
</ul>
<p>Futtasd újra az előbbi lekérdezéseket. Mit tapasztalsz?</p>
<details class="success"><summary>Megoldás</summary><p>A kiadott parancsok megegyeznek az 1.-es feladattal.</p>
<p><strong>a)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-1.png" /></p>
<p>Clustered Index Scan végigmegy a clustered index mentén. Az elsődleges kulcs hatására létrejött egy Clustered Index, azaz innentől a tábla rekordjai ID szerinti sorrendben vannak tárolva. Ha végigmegyünk ezen a struktúrán meglesz az összes sor. Ha van clustered index, már nem fogunk Table Scan-nel találkozni, legrosszabb esetben teljes Clustered Index Scan lesz. Attól, hogy nem Table Scan a neve, a teljes Clustered Index Scan is valójában egy table scan, a teljes tábla adattartalmát felolvassuk. Általános esetben ez probléma, de itt épp ezt kértük a lekérdezésben.</p>
<p><strong>b)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-2.png" /></p>
<p>Ez egy Clustered Index Seek lesz. Mivel a rendezési kulcsra fogalmazunk meg egyezési feltételt, a rendezett tárolású rekordok közül nagyon gyorsan eljuthatunk a keresetthez. Ez egy jó terv, a Clustered Index egyik alapfeladata a rekord gyors megtalálása, erre van optimalizálva.</p>
<p><strong>c)</strong></p>
<p>Az előzőhöz nagyon hasonló a terv: ez is Clustered Index Seek lesz két intervallummal (<code>&lt; konstans</code>, <code>&gt; konstans</code>). Az optimalizáló két intervallumra bontja a &lt;&gt;-t. Mivel a feltétel a rendezési kulcsra vonatkozik, megint ki tudja használni a Clustered Indexet. Ez is egy jó terv, a rendezés miatt csak a szükséges rekordokat fogjuk felolvasni.</p>
<p><strong>d)</strong></p>
<p>Ez is Clustered Index Seek alapú range scan lesz egy intervallummal. Az előbbihez nagyon hasonló.</p>
<p><strong>e)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-3.png" /></p>
<p>Ismét Clustered Index Seek backward seek order-rel. Megnézhetjük a <em>Properties</em> ablakban a range-et és a Seek Order-t: kikeressük a határon lévő rekordot és onnan visszafelé indulunk el, így eleve rendezve lesz az eredményhalmaz. Ez egy jó terv, a rendezés miatt csak a szükséges rekordokat fogjuk felolvasni és pont a megfelelő sorrendben.</p>
</details>
<h2 id="feladat-3-2p">Feladat 3 (2p)<a class="headerlink" href="#feladat-3-2p" title="Permanent link">&para;</a></h2>
<p>Futtasd az alábbi lekérdezéseket a <code>Product</code> táblán megfogalmazva.</p>
<ul>
<li>f) teljes tábla lekérdezése</li>
<li>g) egyenlőség alapú keresés a <code>Price</code> oszlopra</li>
<li>h) olyan rekordok lekérdezése, ahol a <code>Price</code> értéke nem egy konstans érték (&lt;&gt;)</li>
<li>i) olyan rekordok lekérdezése, ahol a <code>Price</code> értéke nagyobb, mint egy konstans érték</li>
<li>j) olyan rekordok lekérdezése, ahol a <code>Price</code> értéke nagyobb, mint egy konstans érték, <code>Price</code> szerint csökkenő sorrendbe rendezve</li>
</ul>
<p>Add meg a használt SQL utasításokat, majd vizsgáld meg a lekérdezési terveket, és adj magyarázatot rájuk!</p>
<details class="success"><summary>Megoldás</summary><p>A kiadott <strong>parancsok</strong>:</p>
<ul>
<li>f) <code>select * from product</code></li>
<li>g) <code>select * from product where price = 800</code></li>
<li>h) <code>select * from product where price &lt;&gt; 800</code></li>
<li>i) <code>select * from product where price &gt; 800</code></li>
<li>j) <code>select * from product where price &gt; 800 order by price desc</code></li>
</ul>
<p><strong>f)-i)</strong></p>
<p><img alt="" src="../../images/queryopt/f3-1.png" /></p>
<p>Clustered Index Scan végigmegy a clustered index mentén. Ez továbbra is a teljes tábla felolvasása, hiszen a szűrésre nincs index. Ha van szűrési feltétel, minden soron végig kell menni és ki kell értékelni a feltételt. Mivel van Clusterd Index, így amentén haladunk, de nem sokra megyünk ezzel, lényegében egy Table Scan. Ezek nem hatékony lekérdezések. Mivel nem a Clustered Index rendezési kulcsra fogalmaztuk meg a feltételt, így az index nem sokat segít nekünk (ezért lesz Scan és nem Seek).</p>
<p><strong>j)</strong></p>
<p><img alt="" src="../../images/queryopt/f3-2.png" /></p>
<p>Ez is Clustered Index Scan lesz, de ami az érdekes, hogy a rendezés költsége jelentős (nagyobb mint a kikeresésé). Miután az elég költséges Index Scan-t megcsináltuk, még rendeznünk is kell, hiszen a kiolvasott rekordok ID szerint sorrendezettek nem <code>Price</code> szerint. Ez a lekérdezés nagyon költséges, az amúgy is drága scan után még rendezni is kell. A jó index nem csak a keresést segíti - de most nincs megfelelő indexünk.</p>
</details>
<h2 id="feladat-4-2p">Feladat 4 (2p)<a class="headerlink" href="#feladat-4-2p" title="Permanent link">&para;</a></h2>
<p>Vegyél fel indexet a <code>Price</code> oszlopra. Hogyan változnak az előbbi lekérdezések végrehajtási tervei?</p>
<p>Az index felvételéhez használd az <em>Object Explorer</em>-t, a fában a táblát kibontva az <em>Indexes</em>-en jobbklikk -&gt; <em>New index</em> &gt; <em>Non-Clustered Index...</em></p>
<p><img alt="Index hozzáadása" src="../../images/queryopt/queryopt-add-index.png" /></p>
<p>Adj az indexeknek értelmes, egységes konvenció szerinti nevet, pl. <code>IX_Tablanev_MezoNev</code>. Add a <em>Price</em> oszlopot az <em>Index key columns</em> listához.</p>
<p><img alt="Index tulajdonságok" src="../../images/queryopt/queryopt-index-properties.png" /></p>
<p>Ismételd meg az előbbi lekérdezéseket, és értelmezd a terveket!</p>
<details class="success"><summary>Megoldás</summary><p>A parancsok megegyeznek az előző feladatéval.</p>
<p><strong>f)</strong></p>
<p>Hiába az új index, ez még mindíg Index Scan lesz - hiszen a teljes tábla tartalmát kértük.</p>
<p><strong>g)-i)</strong></p>
<p>Clustered Index Scan lesz, lényegében megegyezik a szűréshez elvileg használható index nélküli esettel.</p>
<p>Miért nem használja az új indexünket? A nem túl nyilvánvaló ok a projekcióban rejlik, azaz, hogy teljes rekordokat kérünk vissza. Az NonClustered Index-ből csak egy halom rekordreferenciát kapnánk, amik alapján még utána fel kellene olvasni a szükséges rekordokat. Az optimalizáló – főleg kis táblák esetén- dönthet úgy, hogy ennek összköltsége nagyobb lenne, mint egy index scan-nek.</p>
<p><strong>j)</strong></p>
<p><img alt="" src="../../images/queryopt/f4-1.png" /></p>
<p>A NonClustered Index Seek-ből kikeresett megfelelő kulcsoknak megfelelő rekordokat kikeressük a Clustered Index-ből. Lényegében egy join a két index között.</p>
<p>A többi lekérdezésnél is valami ilyet vártunk volna. A Clustered Index-re szükség van, mert teljes rekordokat kérünk vissza, a NonClustered Index csak referenciákat ad. A referenciák sorrendben vannak, így ha ezekhez rendre kigyűjtjük a teljes rekordokat a Clustered Index-ből akkor megspóroljuk az utólagos rendezést. Ha csak a Clustered Index-et használnánk (teljes Clustered Index Scan), akkor kellene utólagos rendezés. Ez egy elfogadható terv, mert a NonClustered Index segítségével megúsztuk a külön rendezést.</p>
</details>
<h2 id="feladat-5-2p">Feladat 5 (2p)<a class="headerlink" href="#feladat-5-2p" title="Permanent link">&para;</a></h2>
<p>Szaporítsd meg a <em>Product</em> tábla sorait az alábbi SQL szkripttel. Hogyan változnak az előbbi végrehajtási tervek?</p>
<p>Az i) típusú lekérdezést próbáld ki úgy is, hogy a választott konstans miatt kicsi legyen az eredményhalmaz, és úgy is, hogy lényegében a teljes tábla benne legyen. Adj magyarázatot is a változásokra.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">TOP</span> <span class="p">(</span><span class="mi">1000000</span><span class="p">)</span> <span class="n">n</span> <span class="o">=</span> <span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span>
<span class="k">INTO</span> <span class="n">dbo</span><span class="p">.</span><span class="n">Numbers</span>
<span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">all_objects</span> <span class="k">AS</span> <span class="n">s1</span> <span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">sys</span><span class="p">.</span><span class="n">all_objects</span> <span class="k">AS</span> <span class="n">s2</span>
<span class="k">OPTION</span> <span class="p">(</span><span class="n">MAXDOP</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="n">CLUSTERED</span> <span class="k">INDEX</span> <span class="n">n</span> <span class="k">ON</span> <span class="n">dbo</span><span class="p">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="p">;</span>


<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Product</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Price</span><span class="p">,</span> <span class="n">Stock</span><span class="p">,</span> <span class="n">VATID</span><span class="p">,</span> <span class="n">CategoryID</span><span class="p">)</span>
<span class="k">SELECT</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">%</span><span class="mi">50000</span><span class="p">,</span> <span class="n">n</span><span class="o">%</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span>
<span class="k">FROM</span> <span class="n">Numbers</span>
</code></pre></div>
<details class="success"><summary>Megoldás</summary><p>A parancsok megegyeznek a korábbiakkal.</p>
<p><strong>f)</strong></p>
<p>Megegyezik az előző feladattal.</p>
<p><strong>g)</strong></p>
<p><img alt="" src="../../images/queryopt/f5-1.png" /></p>
<p>A NonClustered Index Seek-ből kikeresett kulcsoknak megfelelő rekordokat kikeressük a Clustered Index-ből. Lényegében egy join a két index között.</p>
<p>Vessük össze az előző, kis táblás változattal. Miért nem használja most a Clustered Index Scan-t? Nagy tábláknál megnő a <em>szelektivitás</em> szerepe és jelentős a NonClustered Index használatából fakadó előny. A Clustered Index Scan nagy méretnél nagyon drága, ha van esély rá, hogy az NonClustered Index használatával csökkenthető a felolvasható sorok száma, akkor szinte biztosan érdemes használni. A <code>Price</code> statisztikái alapján tudható, hogy az = operátor jól szűr. Fontos! Az <code>=</code> használatából még nem következik a jó szűrés, ha szinte minden sorban ugyanaz az érték van, akkor pl. nem fog jól szűrni - ezért kell a statisztika is!</p>
<p>Ez a terv elfogadható. Ha a feltételünk jól szűr, akkor tényleg ez lehet a jó irány.</p>
<p><strong>h)</strong></p>
<p><img alt="" src="../../images/queryopt/f5-2.png" /></p>
<p>Clustered Index Scan végigmegy a clustered index mentén, megegyezik a korábban látottakkal.</p>
<p>Miért nem használjuk az előző módszert? Ha az <code>=</code> ezen tábla esetében jól szűrt, akkor a <code>&lt;&gt;</code> nem fog. Ha ezt tudja a statisztikák alapján az optimalizáló, akkor összességében nem éri meg trükközni, úgyis fel kell olvasni a teljes táblát.</p>
<p><strong>i)</strong></p>
<p>Attól függ, hogy milyen konstanst választunk. Ha nagyon jól szűr (pl. nagyon nagy szám a konstans), akkor a g)-nél, ha nem akkor a h)-nál látott módszert követi.</p>
<p><strong>j)</strong></p>
<p>Mint a g) esetében. Számít itt az <code>order by desc</code>? Az optimalizáló megpróbálja elkerülni a rendezést, azt pedig csak ezzel a módszerrel tudja. Ez egy elfogadható terv. Az NonClustered Index segítségével itt is megúsztuk a rendezést.</p>
</details>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <nav
      class="md-footer__inner md-grid"
      aria-label="Footer"
    >

      <!-- Link to previous page -->
      
        <a
          href="../"
          class="md-footer__link md-footer__link--prev"
          rel="prev"
        >
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Előző
              </span>
              Lekérdezés optimalizálás
            </div>
          </div>
        </a>
      

      <!-- Link to next page -->
      
        <a
          href="../Feladat-2/"
          class="md-footer__link md-footer__link--next"
          rel="next"
        >
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Következő
              </span>
              Önálló feladatok
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; BME VIK AUT
          </div>
        
      </div>

      <!-- Social links -->
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "M\u00e1sol\u00e1s v\u00e1g\u00f3lapra", "clipboard.copied": "V\u00e1g\u00f3lapra m\u00e1solva", "search.config.lang": "hu", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Keres\u00e9s", "search.result.placeholder": "Keres\u00e9shez \u00edrj ide valamit", "search.result.none": "Nincs tal\u00e1lat", "search.result.one": "1 egyez\u0151 dokumentum", "search.result.other": "# egyez\u0151 dokumentum", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>